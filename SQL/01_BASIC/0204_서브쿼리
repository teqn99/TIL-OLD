# Oracle SQL Developer

[상관(연관) 쿼리]
- 메인쿼리문의 조회값을 서브쿼리의 조건에서 사용하는 쿼리.
- 메인쿼리를 실행하고 그 결과를 바탕으로 서브쿼리의 조건절을 비교한다.
  ex)
  select  e.emp_id,
          e.emp_name,
          e.salary,
          e.dept_id
  from    emp e
  where   salary = (select max(salary)
                    from emp
                    where nvl(dept_id, 0) = nvl(e.dept_id, 0))
  order by 1;



[EXISTS, NOT EXISTS 연산자 (상관(연관)쿼리와 같이 사용된다)]
-- 서브쿼리의 결과를 만족하는 값이 존재하는지 여부를 확인하는 조건. 조건을 만족하는 행이 여러개라도 한행만 있으면 더이상 검색하지 않는다.

데이터 테이블(고객, 장비, 강의장 - 부모) - Transaction(내역) 테이블(주문, 대여, 대여 - 자식)
-- 내역테이블에서 데이터테이블의 값이 한 번이라도 참조되고 있는지(exists) 한 번도 참조된 적 없는지(not exists) 
-- 고객 중에 한번이라도(한 번 이상) 주문한 고객? 
  ex)
  1) 직원이 한명이상 있는 부서의 부서ID(dept.dept_id)와 이름(dept.dept_name), 위치(dept.loc)를 조회
      select  d.dept_id,
              d.dept_name,
              d.loc
      from    dept d
      where   exists (select * from emp e where e.dept_id = d.dept_id)
      order by 1;

  2) 직원이 한명도 없는 부서의 부서ID(dept.dept_id)와 이름(dept.dept_name), 위치(dept.loc)를 조회
      select  d.dept_id,
              d.dept_name,
              d.loc
      from    dept d
      where   not exists (select * from emp e where e.dept_id = d.dept_id)
      order by 1;
      
      
      
